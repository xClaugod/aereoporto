<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Voli Futuri</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        input[type="text"] { padding: 5px 10px; margin-bottom: 20px; width: 100%; }
    </style>
</head>
<body>

<h1>Elenco voli futuri</h1>

<!-- Barra di ricerca -->
<input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Cerca voli..." />

<table id="flightsTable">
    <thead>
        <tr>
            <th>ID</th>
            <th>Partenza</th>
            <th>Arrivo</th>
            <th>Data</th>
            <th>Passeggeri</th>
            <th>Peso Bagagli (kg)</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="flight : ${flights}">
            <td th:text="${flight.id}"></td>
            <td th:text="${flight.departureCity}"></td>
            <td th:text="${flight.arrivalCity}"></td>
            <td th:text="${#dates.format(flight.departureTime, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${flight.passengers}"></td>
            <td th:text="${flight.goods}"></td>
        </tr>
    </tbody>
</table>

<script>
    function filterTable() {
        let input = document.getElementById("searchInput");
        let filter = input.value.toLowerCase();
        let table = document.getElementById("flightsTable");
        let rows = table.getElementsByTagName("tr");

        // Loop through all rows, and hide those that don't match the search
        for (let i = 1; i < rows.length; i++) {
            let cells = rows[i].getElementsByTagName("td");
            let match = false;
            for (let j = 0; j < cells.length; j++) {
                let cell = cells[j];
                if (cell) {
                    if (cell.innerHTML.toLowerCase().indexOf(filter) > -1) {
                        match = true;
                    }
                }
            }
            rows[i].style.display = match ? "" : "none";
        }
    }
</script>

</body>
</html>
